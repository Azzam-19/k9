<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Arial", sans-serif;
        background-color: #f8f9fa;
      }
      .container {
        margin-top: 40px;
      }
      h2 {
        margin-top: 40px;
        margin-bottom: 20px;
      }
      table {
        background: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">Admin Dashboard - K9 Shoes</h1>

      <!-- User Login Info -->
      <h2>Daftar Pengguna yang Login</h2>
      <ul id="userList" class="list-group"></ul>

      <!-- Checkout List -->
      <h2>Daftar Checkout</h2>
      <div id="checkoutList"></div>

      <!-- Manajemen Produk -->
      <h2>Manajemen Produk</h2>
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Nama Produk</th>
            <th>Harga</th>
            <th>Stok</th>
            <th>Jenis</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="productTable">
          <!-- Diisi via JS -->
        </tbody>
      </table>
    </div>

    <script>
      // Tampilkan daftar user login
      const userList = document.getElementById("userList");
      const storedUsername = localStorage.getItem("username");
      if (storedUsername) {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.textContent = storedUsername;
        userList.appendChild(li);
      } else {
        userList.innerHTML =
          "<li class='list-group-item text-muted'>Belum ada yang login.</li>";
      }

      // Dummy data checkout
      const checkoutList = document.getElementById("checkoutList");
      const checkoutData = JSON.parse(localStorage.getItem("checkoutData"));
      if (checkoutData) {
        checkoutList.innerHTML = `
        <div class="card p-3 mb-3">
          <p><strong>Nama:</strong> ${checkoutData.fullname}</p>
          <p><strong>Email:</strong> ${checkoutData.email}</p>
          <p><strong>Alamat:</strong> ${checkoutData.address}, ${checkoutData.city}, ${checkoutData.province} - ${checkoutData.zip}</p>
          <p><strong>Metode Pembayaran:</strong> ${checkoutData.payment}</p>
          <a href="buktipembelian.html" class="btn btn-success">Lihat Bukti Pembelian & ACC</a>
        </div>`;
      } else {
        checkoutList.innerHTML =
          "<p class='text-muted'>Belum ada data checkout.</p>";
      }

      // Dummy product data
      let products = [
        {
          id: 1,
          name: "K9 Running Shoes",
          price: 300000,
          stock: 10,
          type: "Olahraga",
        },
        {
          id: 2,
          name: "K9 Casual Sneakers",
          price: 250000,
          stock: 5,
          type: "Kasual",
        },
      ];

      const productTable = document.getElementById("productTable");
      function renderProducts() {
        productTable.innerHTML = "";
        products.forEach((product) => {
          productTable.innerHTML += `
          <tr>
            <td>${product.name}</td>
            <td><input type="number" value="${product.price}" onchange="updateProduct(${product.id}, 'price', this.value)" /></td>
            <td><input type="number" value="${product.stock}" onchange="updateProduct(${product.id}, 'stock', this.value)" /></td>
            <td><input type="text" value="${product.type}" onchange="updateProduct(${product.id}, 'type', this.value)" /></td>
            <td><button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})">Hapus</button></td>
          </tr>`;
        });
      }

      function updateProduct(id, field, value) {
        products = products.map((p) => {
          if (p.id === id)
            p[field] =
              field === "price" || field === "stock" ? parseInt(value) : value;
          return p;
        });
        renderProducts();
      }

      function deleteProduct(id) {
        if (confirm("Yakin ingin menghapus produk ini?")) {
          products = products.filter((p) => p.id !== id);
          renderProducts();
        }
      }

      renderProducts();
    </script>
  </body>
</html>
